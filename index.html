<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>CYBERINT // OS V23</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

<style>
/* === CORE VARIABLES (CYBERPUNK AESTHETIC) === */
:root {
  --bg: #020408;
  --primary: #00f3ff; /* Neon Cyan */
  --dim: #005f73;
  --text: #e0faff;
  --alert: #ff2a6d;
  --success: #00ff41;
  --console-bg: #050505;
  --font-head: 'Share Tech Mono', monospace;
  --font-body: 'Rajdhani', sans-serif;
  --glow: 0 0 10px rgba(0, 243, 255, 0.2);
  --radius: 0px;
  --glass: none;
}

/* === iOS THEME (PREMIUM RESTORED) === */
body.theme-ios {
  --bg: #000000; /* True Black */
  --primary: #0A84FF; /* iOS Blue */
  --dim: #8E8E93;
  --text: #FFFFFF;
  --alert: #FF453A;
  --success: #30D158;
  --console-bg: rgba(28, 28, 30, 0.6);
  --glow: none;
  --radius: 16px;
  --glass: blur(20px) saturate(180%);
}
body.theme-ios .box-style { 
  border: 1px solid rgba(255,255,255,0.15); 
  background: rgba(30, 30, 35, 0.75); 
  backdrop-filter: var(--glass); -webkit-backdrop-filter: var(--glass);
  box-shadow: 0 8px 32px rgba(0,0,0,0.5);
}
body.theme-ios .header { background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.1); }
body.theme-ios input { background: rgba(255,255,255,0.1); border-color: transparent; }
body.theme-ios .status-bar { background: rgba(20,20,20,0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
body.theme-ios #btnDeep {
  background: linear-gradient(135deg, #FF9F0A 0%, #FF3B30 100%);
  color: white; border: none; font-weight: bold;
  box-shadow: 0 4px 15px rgba(255, 159, 10, 0.4);
}
body.theme-ios #btnDeep.armed {
   background: #30D158; box-shadow: 0 0 20px rgba(48, 209, 88, 0.6);
}

/* === RESET === */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
body {
  margin: 0; height: 100vh;
  background-color: var(--bg); color: var(--primary); font-family: var(--font-body);
  display: flex; flex-direction: column; overflow: hidden;
  transition: background 0.5s ease;
}

/* MATRIX BG */
canvas#matrix { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.15; pointer-events: none; }
body.theme-ios canvas#matrix { opacity: 0.05; }

/* === HEADER === */
.header {
  padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
  border-bottom: 1px solid var(--primary); background: rgba(0,0,0,0.95);
  flex-shrink: 0; z-index: 50; transition: 0.3s;
}
.brand { font-family: var(--font-head); font-size: 20px; letter-spacing: 2px; text-shadow: var(--glow); }
.header-icons { display: flex; gap: 10px; align-items: center; }
.icon-btn {
  background: transparent; border: 1px solid var(--dim); color: var(--primary);
  padding: 6px; cursor: pointer; border-radius: 4px; transition: 0.3s;
}
.icon-svg { width: 18px; height: 18px; fill: none; stroke: currentColor; stroke-width: 2; }

/* === MAIN CONTENT === */
.app-content { flex: 1; padding: 15px; display: flex; flex-direction: column; overflow: hidden; animation: fadeUp 0.6s ease-out; }

.unified-box {
  flex: 1; display: flex; flex-direction: column;
  border: 1px solid var(--primary); background: rgba(0,0,0,0.6);
  border-radius: var(--radius); overflow: hidden;
  margin-bottom: 10px; transition: 0.3s;
}

.command-section { padding: 20px; border-bottom: 1px solid var(--dim); background: rgba(255,255,255,0.02); }
.box-label { font-size: 11px; font-family: var(--font-head); color: var(--dim); margin-bottom: 10px; display: block; }

input {
  width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--dim);
  color: #fff; font-family: var(--font-head); font-size: 16px; padding: 12px; margin-bottom: 15px;
  border-radius: 4px; transition: 0.3s;
}
input:focus { border-color: var(--primary); box-shadow: 0 0 10px rgba(0,243,255,0.1); }

.controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.btn {
  position: relative; overflow: hidden; 
  background: rgba(0, 243, 255, 0.05); border: 1px solid var(--primary); color: var(--primary);
  padding: 12px; font-family: var(--font-head); font-size: 14px; cursor: pointer; transition: 0.3s;
}

/* THE LASER BEAM IS BACK */
.scan-beam {
  position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.8), transparent);
  transform: skewX(-20deg); pointer-events: none; z-index: 2;
}
.btn.scanning .scan-beam { animation: beam 1.2s infinite; }
@keyframes beam { 0% { left: -100%; } 100% { left: 200%; } }

.dashboard-fill {
  flex: 1; padding: 10px; display: flex; flex-direction: column; gap: 10px;
  background: rgba(0,0,0,0.3); overflow: hidden;
}
.typing-terminal {
  flex: 1; background: var(--console-bg); border: 1px solid var(--dim);
  font-family: 'Courier New', monospace; font-size: 11px; color: var(--primary);
  padding: 10px; overflow-y: auto; border-radius: 4px;
}
.term-line { margin-bottom: 2px; word-break: break-all; }
.t-green { color: var(--success); }
.t-red { color: var(--alert); }
.t-dim { color: #888; }

.status-bar {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 15px; border: 1px solid var(--primary); background: rgba(0,0,0,0.8);
  border-radius: var(--radius); transition: 0.3s;
}
.stat-val { font-family: var(--font-head); font-size: 16px; font-weight: bold; color: #fff; }
.status-bar.ready { border-color: var(--success); }
.status-bar.ready .stat-val { color: var(--success); text-shadow: 0 0 8px var(--success); }
.status-bar.error { border-color: var(--alert); }
.status-bar.error .stat-val { color: var(--alert); text-shadow: 0 0 8px var(--alert); }

.footer { padding: 20px; border-top: 1px solid var(--primary); background: #000; flex-shrink: 0; }
.big-btn {
  width: 100%; padding: 16px; background: transparent; border: 1px solid var(--primary);
  color: var(--primary); font-family: var(--font-head); font-size: 16px; letter-spacing: 2px; 
  cursor: pointer; border-radius: var(--radius); transition: 0.3s;
}
.big-btn:active { background: var(--primary); color: #000; }

/* === AUTH WINDOW === */
#security-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: #000; z-index: 9999;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  padding: 20px;
}
.login-box {
  width: 100%; max-width: 350px;
  border: 1px solid var(--primary); padding: 30px;
  background: rgba(10, 15, 20, 0.9); text-align: center;
  box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);
}
.login-title { font-family: var(--font-head); font-size: 24px; color: var(--primary); margin-bottom: 20px; }
#auth-msg { color: var(--alert); font-size: 12px; height: 20px; margin-bottom: 5px; font-family: var(--font-head); }

/* === REPORT WINDOW === */
#report-ui {
  display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: var(--bg); z-index: 200; flex-direction: column;
}
#report-ui.show { display: flex; animation: slideUp 0.3s ease-out; }
.rep-head { padding: 15px 20px; border-bottom: 1px solid var(--primary); background: #000; display: flex; justify-content: space-between; align-items: center; }
.rep-body { flex: 1; overflow-y: auto; padding: 20px; }
.report-card { border: 1px solid var(--dim); background: rgba(10,15,20,0.8); margin-bottom: 12px; border-radius: var(--radius); padding: 10px; }
.row { display: flex; padding: 4px 0; border-bottom: 1px solid rgba(255,255,255,0.08); font-size: 12px; }
.k { width: 100px; color: #777; font-weight: bold; }
.v { flex: 1; color: #ccc; word-break: break-all; }
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
@keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

</style>
</head>
<body>

<canvas id="matrix"></canvas>

<div id="security-overlay">
  <div class="login-box">
    <div class="login-title">SYSTEM AUTH</div>
    <div style="margin-bottom:15px; font-size:12px; color:var(--dim);">ENTER SECURE API KEY</div>
    <input type="text" id="secureKeyInput" placeholder="PASTE KEY HERE..." style="text-align:center;">
    <div id="auth-msg"></div>
    <button class="big-btn" onclick="authenticate()">AUTHENTICATE</button>
  </div>
</div>

<div class="header">
  <div class="brand">CYBERINT // <span>OS</span></div>
  <div class="header-icons">
    <button class="icon-btn" onclick="toggleTheme()"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12c0 3.1 1.45 5.86 3.73 7.66.36.29.62.75.62 1.22 0 .61-.43 1.13-1.02 1.29-.49.13-.85.58-.85 1.1 0 .68.55 1.23 1.23 1.23h12.58c.68 0 1.23-.55 1.23-1.23 0-.52-.36-.97-.85-1.1-.59-.16-1.02-.68-1.02-1.29 0-.48.26-.93.62-1.22C20.55 17.86 22 15.1 22 12c0-5.52-4.48-10-10-10zm-4 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm8 0c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/></svg></button>
    <button class="icon-btn" onclick="location.reload()"><svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm-6 8c0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3c-3.31 0-6-2.69-6-6z"/></svg></button>
  </div>
</div>

<div class="app-content">
  <div class="unified-box box-style">
    
    <div class="command-section">
      <div class="box-label">COMMAND INTERFACE</div>
      <input id="q" placeholder="ENTER TARGET ID..." autocomplete="off">
      <div class="controls">
        <button id="btnScan" class="btn" onclick="startScan()">
          SCAN TARGET <div class="scan-beam"></div>
        </button>
        <button id="btnDeep" class="btn" onclick="toggleDeep()">DEEP SEARCH</button>
      </div>
    </div>

    <div class="dashboard-fill">
      <div class="typing-terminal" id="terminal">
        <div class="term-line">root@os:~# System ready.</div>
      </div>
      
      <div class="status-bar box-style" id="statusBox">
        <span class="stat-lbl">SYSTEM STATUS:</span>
        <span class="stat-val" id="statusVal">IDLE</span>
      </div>
    </div>

  </div>
</div>

<div class="footer">
  <button class="big-btn" onclick="openReport()">OPEN COMPILED DOSSIER</button>
</div>

<div id="report-ui">
  <div class="rep-head">
    <div style="font-family:var(--font-head); font-size:18px;">TARGET DOSSIER</div>
    <button onclick="closeReport()" style="background:transparent; border:1px solid var(--alert); color:var(--alert); padding:5px 15px;">CLOSE</button>
  </div>
  <div class="rep-body" id="rep-body"></div>
</div>

<script>
// === 1. CORE AUTH ===
let USER_API_KEY = "";

document.addEventListener("DOMContentLoaded", () => {
  const savedKey = localStorage.getItem("cyberint_key");
  if(savedKey) {
    document.getElementById('secureKeyInput').value = savedKey;
    authenticate(true);
  }
  startMatrix();
});

history.pushState(null, null, location.href);
window.onpopstate = function() {
  const report = document.getElementById('report-ui');
  if (report.classList.contains('show')) { closeReport(); history.pushState(null, null, location.href); }
  else { history.back(); }
};

function authenticate(auto = false) {
  const input = document.getElementById('secureKeyInput');
  const msg = document.getElementById('auth-msg');
  const key = input.value.trim();
  
  if(!key) { 
    if(!auto) { msg.innerText = "âš  KEY REQUIRED"; input.focus(); }
    return; 
  }
  
  USER_API_KEY = key; 
  localStorage.setItem("cyberint_key", key); 
  
  const overlay = document.getElementById('security-overlay');
  overlay.style.transition = "opacity 0.5s";
  overlay.style.opacity = "0";
  setTimeout(() => { overlay.style.display = "none"; }, 500);
  
  if(!auto) logLine("AUTH SUCCESSFUL. CREDENTIALS CACHED.", "t-green");
}

// === 2. TERMINAL VISUALS (FIXED SPACING) ===
const term = document.getElementById('terminal');

function logLine(txt, cls="") {
  const d = document.createElement('div');
  d.className = "term-line " + cls;
  d.innerText = "> " + txt;
  term.appendChild(d);
  term.scrollTop = term.scrollHeight;
}

// Spaces fixed for proper readability
async function runScanEffect() {
  term.innerHTML = "";
  const msgs = [
    "[*] Target acquired. Initiating handshake...",
    "[+] Routing through secure gateway...",
    "[*] Querying LeakCheck / Snus / Breached...",
    "[*] Decrypting hashed passwords...",
    "[!] Found potential matches in DB-3..."
  ];
  
  for(const msg of msgs) {
    const d = document.createElement('div');
    d.className = "term-line t-green";
    term.appendChild(d);
    
    // Typewriter effect
    for(let i=0; i<msg.length; i++) {
      d.innerText += msg[i];
      await new Promise(r => setTimeout(r, 8)); 
    }
    await new Promise(r => setTimeout(r, 200)); 
    term.scrollTop = term.scrollHeight;
  }
}

// === 3. LOGIC & API ===
let isDeep = false;
let globalData = [];

function toggleDeep() { 
  isDeep = !isDeep; 
  document.getElementById('btnDeep').classList.toggle('armed', isDeep);
  logLine(isDeep ? "DEEP SEARCH: ENABLED" : "DEEP SEARCH: DISABLED", "t-green");
}

function setStatus(txt, type) {
  const b = document.getElementById('statusBox');
  document.getElementById('statusVal').innerText = txt;
  b.className = "status-bar box-style"; 
  if(type) b.classList.add(type);
}

async function startScan() {
  if(!USER_API_KEY) {
    document.getElementById('security-overlay').style.display = 'flex';
    setTimeout(() => { document.getElementById('security-overlay').style.opacity = '1'; }, 10);
    return;
  }

  const q = document.getElementById('q').value.trim(); if(!q) return;
  const btn = document.getElementById('btnScan');
  
  btn.classList.add('scanning'); 
  document.getElementById('btnScan').innerText = "SCANNING...";
  setStatus("RUNNING...", "");
  
  runScanEffect(); 
  
  const data = await fetchIntel(q); 
  
  setTimeout(() => {
    btn.classList.remove('scanning');
    document.getElementById('btnScan').innerText = "SCAN TARGET";
    
    if(!data) {
       setStatus("NET ERROR", "error");
       logLine("!! CONNECTION FAILED - PROXIES BLOCKED", "t-red");
    } else if (data.error) {
       setStatus("AUTH FAIL", "error");
       logLine("!! API KEY INVALID OR EXPIRED", "t-red");
       localStorage.removeItem("cyberint_key");
       setTimeout(() => location.reload(), 2000);
    } else if(!data.List) { 
      setStatus("NO DATA", "error"); 
      logLine("!! NO RECORDS FOUND", "t-red");
    } else {
      processData(data);
      setStatus("SUCCESS", "ready"); 
      logLine(">> REPORT COMPILED.", "t-green");
    }
  }, 2500); 
}

// === 4. FIXED NETWORK LOGIC (ONLY CORSPROXY) ===
// REMOVED BROKEN PROXIES (AllOrigins/ThingProxy)
async function fetchIntel(query) {
  const target = "https://leakosintapi.com/";
  // ONLY USE CORSPROXY.IO (Supports POST)
  const proxy = "https://corsproxy.io/?";
  
  try {
      logLine(`Trying secure tunnel...`, "t-dim");
      const res = await fetch(proxy + encodeURIComponent(target), {
        method: "POST", 
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token: USER_API_KEY, request: query, limit: 100, lang: "en", type: "json" })
      });
      if(res.status === 401) return { error: true };
      if(res.ok) return await res.json();
  } catch(e) { console.log("Proxy fail"); }

  return null;
}

function processData(data) {
  globalData = [];
  for(const src in data.List) { 
    (data.List[src].Data || []).forEach(row => globalData.push({ source: src, data: row })); 
  }
}

// === 5. UI UTILS ===
function openReport() {
  if(globalData.length === 0) { alert("No Data Found."); return; }
  const ui = document.getElementById('report-ui'); const body = document.getElementById('rep-body');
  ui.classList.add('show'); body.innerHTML = "";
  
  globalData.forEach((item, idx) => {
    let html = "";
    for(const k in item.data) {
       html += `<div class="row"><div class="k">${k}</div><div class="v">${item.data[k]}</div></div>`;
    }
    body.innerHTML += `<div class="report-card"><div style="color:var(--primary); margin-bottom:5px; font-weight:bold;">${item.source}</div>${html}</div>`;
  });
}
function closeReport() { document.getElementById('report-ui').classList.remove('show'); }
function toggleTheme() { document.body.classList.toggle('theme-ios'); }

// MATRIX BG
function startMatrix() {
  const c = document.getElementById('matrix'); const ctx = c.getContext('2d');
  c.width = window.innerWidth; c.height = window.innerHeight;
  const chars = "0123456789"; const drops = Array(Math.floor(c.width/14)).fill(1);
  setInterval(() => {
    ctx.fillStyle = "rgba(0,0,0,0.1)"; ctx.fillRect(0,0,c.width,c.height);
    ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--primary');
    ctx.font = "14px monospace";
    drops.forEach((y, i) => {
      ctx.fillText(chars[Math.floor(Math.random()*10)], i*14, y*14);
      if(y*14 > c.height && Math.random() > 0.98) drops[i]=0; drops[i]++;
    });
  }, 50);
}

</script>
</body>
</html>